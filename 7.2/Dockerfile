FROM docker.io/bitnami/redis-cluster:7.2 
  
ENV REDIS_CLUSTER_REPLICAS=0
ENV REDIS_NODES='127.0.0.1:6379 127.0.0.1:6379 127.0.0.1:6379'
ENV REDIS_CLUSTER_CREATOR=yes
ENV REDIS_CLUSTER_DYNAMIC_IPS=no
ENV REDIS_CLUSTER_ANNOUNCE_IP=127.0.0.1
ENV REDIS_CLUSTER_ANNOUNCE_PORT=20010
ENV REDIS_DNS_RETRIES=5
ENV REDIS_CLUSTER_DNS_LOOKUP_SLEEP=3
ENV REDIS_CLUSTER_DNS_LOOKUP_RETRIES=10
ENV REDIS_PASSWORD=testredis
ENV REDISCLI_AUTH=testredis
ENV REDIS_ACLFILE=/bitnami/redis/config/users.acl

COPY --chown=1001:0 users.acl /bitnami/redis/config/